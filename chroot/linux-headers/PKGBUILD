pkgname=chroot-linux-headers
pkgver=4.18.12
pkgrel=1
arch=('x86_64' 'i586' 'aarch64')
source=(https://cdn.kernel.org/pub/linux/kernel/v4.x/linux-$pkgver.tar.xz)

build() {
	cd linux-$pkgver
	make mrproper
}

package() {
	cd linux-$pkgver
	case $CARCH in
		x86_64)
			export XKARCH="x86_64"
			;;
		i586)
			export XKARCH="i386"
			;;
		aarch64)
			export XKARCH="arm64"
			;;
		*)
			echo "Architecture is not set or is not supported"
			exit 1
	esac

	make ARCH=$XKARCH INSTALL_HDR_PATH=$pkgdir/tools headers_install
}
