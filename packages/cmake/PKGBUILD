# Maintainer: protonesso <nagakamira@gmail.com>
# Contributor: protonesso <nagakamira@gmail.com>

pkgname=cmake
pkgver=3.12.4
pkgrel=1
pkgdesc="A cross-platform open-source make system"
arch=('x86_64' 'i586' 'aarch64' 'arm' 'mips' 'mipsel' 'powerpc64le' 'powerpc64' 'powerpc' 'sparc64' 'sparc' 's390x' 'microblaze' 'or1k' 'hppa' 'riscv64' 'riscv32')
url="http://www.cmake.org/"
license=('custom')
depends=('glibc' 'curl' 'libarchive' 'libuv' 'jsoncpp' 'rhash')
source=("https://www.cmake.org/files/v${pkgver%.*}/$pkgname-$pkgver.tar.gz")
md5sums=('4970869480ee37c8f4c8e7f83c4359cd')

build() {
	cd $pkgname-$pkgver
	./bootstrap \
		--prefix=/usr \
		--mandir=/share/man \
		--docdir=/share/doc/cmake \
		--system-libs \
		--parallel=$(/usr/bin/getconf _NPROCESSORS_ONLN)
	make
}

package() {
	cd $pkgname-$pkgver
	make DESTDIR=$pkgdir install

	rm -rf $pkgdir/usr/share/cmake-${pkgver%.*}/Help
}
